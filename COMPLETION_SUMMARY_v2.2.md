# æ‰«åœ°æœºå™¨äººæ™ºèƒ½æ¸…æ‰«ç³»ç»Ÿ v2.2 - åŠŸèƒ½å®Œæˆæ€»ç»“

## ğŸ‰ æ–°å¢åŠŸèƒ½å®Œæˆ

### âœ… æ™ºèƒ½è‡ªåŠ¨é‡å¯åŠŸèƒ½ v2.2

åŸºäºæ‚¨çš„éœ€æ±‚ï¼Œæˆ‘å·²ç»æˆåŠŸå®ç°äº†è¦†ç›–ç‡åœæ»è‡ªåŠ¨é‡å¯åŠŸèƒ½ï¼Œå½“æ¸…æ‰«è¦†ç›–ç‡2åˆ†é’Ÿæ²¡æœ‰å˜åŒ–æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å…³é—­å½“å‰ç¨‹åºå¹¶é‡å¯æ•´ä¸ªæ¸…æ‰«ä»»åŠ¡ã€‚

#### æ ¸å¿ƒç‰¹æ€§ï¼š

1. **è¦†ç›–ç‡åœæ»æ£€æµ‹**
   - é˜ˆå€¼ï¼š2åˆ†é’Ÿ (120ç§’)
   - å˜åŒ–å®¹å·®ï¼š0.1% (0.001)
   - å®æ—¶ç›‘æ§è¦†ç›–ç‡å˜åŒ–
   - æ™ºèƒ½åˆ¤æ–­æ˜¯å¦åœæ»

2. **è‡ªåŠ¨é‡å¯æœºåˆ¶**
   - ä¿å­˜é‡å¯å‰å®Œæ•´çŠ¶æ€æŠ¥å‘Š
   - ä¼˜é›…å…³é—­æ‰€æœ‰ROSèŠ‚ç‚¹
   - æ¸…ç†è¿›ç¨‹èµ„æº
   - è‡ªåŠ¨å¯åŠ¨æ–°çš„æ¸…æ‰«ä»»åŠ¡
   - æŒç»­ç›‘æ§å¾ªç¯

3. **å®‰å…¨ä¿æŠ¤æœºåˆ¶**
   - æœ€å¤§é‡å¯æ¬¡æ•°é™åˆ¶ (500æ¬¡)
   - é‡å¯é—´éš”æ§åˆ¶ (60ç§’)
   - è¯¦ç»†æ—¥å¿—è®°å½•
   - æ‰‹åŠ¨åœæ­¢åŠŸèƒ½

## ğŸ“‹ å®ç°ç»†èŠ‚

### 1. coverage_monitor.py v2.2 æ›´æ–°
```python
# æ–°å¢è¦†ç›–ç‡åœæ»æ£€æµ‹
self.coverage_stagnation_threshold = 120.0  # 2åˆ†é’Ÿ
self.coverage_change_tolerance = 0.001      # 0.1%å˜åŒ–å®¹å·®

def check_coverage_stagnation(self, elapsed_time):
    """æ£€æŸ¥è¦†ç›–ç‡æ˜¯å¦åœæ»ï¼Œå¦‚åœæ»è¶…è¿‡é˜ˆå€¼åˆ™è§¦å‘è‡ªåŠ¨é‡å¯"""
    # å®æ—¶ç›‘æ§è¦†ç›–ç‡å˜åŒ–
    # è¶…è¿‡é˜ˆå€¼è‡ªåŠ¨è§¦å‘é‡å¯
```

### 2. è‡ªåŠ¨é‡å¯ç®¡ç†å™¨
```bash
# auto_restart_manager.sh - æ™ºèƒ½ç®¡ç†å™¨
./auto_restart_manager.sh start    # å¯åŠ¨è‡ªåŠ¨é‡å¯ç®¡ç†
./auto_restart_manager.sh status   # æ£€æŸ¥çŠ¶æ€
./auto_restart_manager.sh logs     # æŸ¥çœ‹æ—¥å¿—
./auto_restart_manager.sh stop     # åœæ­¢ç®¡ç†
```

### 3. ä¸€é”®æ™ºèƒ½å¯åŠ¨
```bash
# start_intelligent_cleaning.sh - ç»¼åˆå¯åŠ¨å·¥å…·
./start_intelligent_cleaning.sh smart     # æ™ºèƒ½å¯åŠ¨æ‰€æœ‰åŠŸèƒ½
./start_intelligent_cleaning.sh coverage  # ä»…å¯åŠ¨ç›‘æ§
./start_intelligent_cleaning.sh test      # æµ‹è¯•é‡å¯åŠŸèƒ½
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### æ¨èæ–¹å¼ï¼ˆä¸€é”®å¯åŠ¨ï¼‰ï¼š
```bash
cd /home/getting/Sweeping-Robot

# æ–¹å¼1ï¼šæ™ºèƒ½å¯åŠ¨ï¼ˆæ¨èï¼‰
./start_intelligent_cleaning.sh smart

# æ–¹å¼2ï¼šä½¿ç”¨ç®¡ç†å™¨
./auto_restart_manager.sh start
```

### æ‰‹åŠ¨æ–¹å¼ï¼ˆè°ƒè¯•ç”¨ï¼‰ï¼š
```bash
# ç»ˆç«¯1ï¼šå¯åŠ¨roscore
roscore

# ç»ˆç«¯2ï¼šå¯åŠ¨è¦†ç›–ç›‘æ§ï¼ˆåŒ…å«è‡ªåŠ¨é‡å¯ï¼‰
rosrun auto_nav coverage_monitor.py

# ç»ˆç«¯3ï¼šå¯åŠ¨æ¸…æ‰«ä»»åŠ¡
roslaunch auto_nav sequential_clean.launch map_name:=hospital_0.1
```

## ğŸ“Š åŠŸèƒ½éªŒè¯

æ‰€æœ‰åŠŸèƒ½å·²é€šè¿‡æµ‹è¯•éªŒè¯ï¼š
```bash
# åŠŸèƒ½æµ‹è¯•
python3 test_auto_restart.py        # âœ… é€šè¿‡
python3 test_csv_feature.py         # âœ… é€šè¿‡  
./test_csv_monitor.sh               # âœ… é€šè¿‡

# ç¼–è¯‘æµ‹è¯•
catkin_make                         # âœ… æˆåŠŸç¼–è¯‘
```

## ğŸ“‚ ç”Ÿæˆçš„æ–‡ä»¶

### è¿è¡Œæ—¶æ–‡ä»¶ï¼š
- `/home/getting/tmp/sweeping_robot_realtime_data_*.csv` - å®æ—¶CSVæ•°æ®
- `/home/getting/tmp/auto_restart_report_*.txt` - é‡å¯çŠ¶æ€æŠ¥å‘Š
- `/home/getting/tmp/auto_restart_logs/` - è¯¦ç»†è¿è¡Œæ—¥å¿—

### é…ç½®å’Œå·¥å…·æ–‡ä»¶ï¼š
- `auto_restart_manager.sh` - è‡ªåŠ¨é‡å¯ç®¡ç†å™¨
- `start_intelligent_cleaning.sh` - æ™ºèƒ½å¯åŠ¨è„šæœ¬
- `test_auto_restart.py` - åŠŸèƒ½æµ‹è¯•è„šæœ¬
- `AUTO_RESTART_GUIDE.md` - è¯¦ç»†ä½¿ç”¨æŒ‡å—

## ğŸ”§ å·¥ä½œæµç¨‹

1. **æ­£å¸¸è¿è¡Œ**ï¼šæœºå™¨äººå¼€å§‹æ¸…æ‰«ï¼Œè¦†ç›–ç‡æ­£å¸¸å¢é•¿
2. **åœæ»æ£€æµ‹**ï¼šè¦†ç›–ç‡è¿ç»­2åˆ†é’Ÿæ— æ˜¾è‘—å˜åŒ– (< 0.1%)
3. **è§¦å‘é‡å¯**ï¼šè‡ªåŠ¨ä¿å­˜çŠ¶æ€æŠ¥å‘Šå¹¶å…³é—­å½“å‰ä»»åŠ¡
4. **ç³»ç»Ÿé‡å¯**ï¼šå¯åŠ¨æ–°çš„æ¸…æ‰«ä»»åŠ¡ï¼Œä»å¤´å¼€å§‹æ¸…æ‰«
5. **å¾ªç¯ç›‘æ§**ï¼šé‡å¤ç›‘æ§è¿‡ç¨‹ï¼Œæœ€å¤šé‡å¯10æ¬¡

## ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶

- âœ… **é‡å¯æ¬¡æ•°é™åˆ¶**ï¼šé˜²æ­¢æ— é™é‡å¯å¾ªç¯
- âœ… **çŠ¶æ€ä¿å­˜**ï¼šé‡å¯å‰å®Œæ•´ä¿å­˜å½“å‰çŠ¶æ€
- âœ… **ä¼˜é›…é€€å‡º**ï¼šå®‰å…¨å…³é—­æ‰€æœ‰è¿›ç¨‹
- âœ… **è¯¦ç»†æ—¥å¿—**ï¼šè®°å½•æ¯æ¬¡é‡å¯çš„åŸå› å’ŒçŠ¶æ€
- âœ… **æ‰‹åŠ¨æ§åˆ¶**ï¼šå¯éšæ—¶åœæ­¢è‡ªåŠ¨é‡å¯

## ğŸ“ˆ æ€§èƒ½ä¼˜åŠ¿

1. **æ•…éšœæ¢å¤**ï¼šè‡ªåŠ¨ä»å¡ä½ã€å®šä½æ¼‚ç§»ç­‰é—®é¢˜ä¸­æ¢å¤
2. **æŒç»­è¿è¡Œ**ï¼šç¡®ä¿æ¸…æ‰«ä»»åŠ¡èƒ½å¤ŸæŒç»­è¿›è¡Œ
3. **æ— äººå€¼å®ˆ**ï¼šå‡å°‘äººå·¥å¹²é¢„éœ€æ±‚
4. **æ•°æ®å®Œæ•´**ï¼šä¿æŒæ‰€æœ‰è¿è¡Œæ•°æ®å’ŒçŠ¶æ€è®°å½•
5. **æ™ºèƒ½åˆ¤æ–­**ï¼šé¿å…è¯¯è§¦å‘ï¼Œä»…åœ¨çœŸæ­£åœæ»æ—¶é‡å¯

## ğŸ¯ é€‚ç”¨åœºæ™¯

- âœ… æœºå™¨äººç‰©ç†å¡ä½
- âœ… è·¯å¾„è§„åˆ’ç®—æ³•å¤±æ•ˆ
- âœ… AMCLå®šä½ä¸¥é‡æ¼‚ç§»
- âœ… ä¼ æ„Ÿå™¨ä¸´æ—¶æ•…éšœ
- âœ… ç½‘ç»œé€šä¿¡ä¸­æ–­
- âœ… ä»»ä½•å¯¼è‡´è¦†ç›–ç‡åœæ»çš„é—®é¢˜

## ğŸ“ ç‰ˆæœ¬æ›´æ–°è®°å½•

- **v2.0**: åŸºç¡€è¦†ç›–ç‡ç›‘æ§å’Œè·¯å¾„ä¿æŒ
- **v2.1**: æ–°å¢CSVå®æ—¶æ•°æ®ä¿å­˜åŠŸèƒ½
- **v2.2**: æ–°å¢æ™ºèƒ½è‡ªåŠ¨é‡å¯åŠŸèƒ½ â­

## ğŸ‰ æ€»ç»“

æ‚¨çš„éœ€æ±‚å·²ç»å®Œå…¨å®ç°ï¼ç³»ç»Ÿç°åœ¨å…·å¤‡ï¼š

1. âœ… **åŸæœ‰åŠŸèƒ½å®Œå…¨ä¿æŒä¸å˜**
2. âœ… **è¦†ç›–ç‡2åˆ†é’Ÿæ— å˜åŒ–è‡ªåŠ¨æ£€æµ‹**
3. âœ… **è‡ªåŠ¨å…³é—­å½“å‰ç¨‹åº**
4. âœ… **è‡ªåŠ¨é‡å¯ roslaunch auto_nav sequential_clean.launch**
5. âœ… **æŒç»­å¾ªç¯ç›‘æ§**
6. âœ… **æ™ºèƒ½å®‰å…¨æœºåˆ¶**
7. âœ… **å®Œæ•´çš„æ—¥å¿—å’ŒçŠ¶æ€è®°å½•**

ç°åœ¨æ‚¨å¯ä»¥å¯åŠ¨ç³»ç»Ÿï¼Œå®ƒä¼šæ™ºèƒ½åœ°ç›‘æ§è¦†ç›–ç‡å¹¶åœ¨éœ€è¦æ—¶è‡ªåŠ¨é‡å¯ï¼Œç¡®ä¿æ¸…æ‰«ä»»åŠ¡æŒç»­æœ‰æ•ˆåœ°è¿›è¡Œï¼

ğŸš€ **ç«‹å³å¼€å§‹ä½¿ç”¨**ï¼š
```bash
./start_intelligent_cleaning.sh smart
```
