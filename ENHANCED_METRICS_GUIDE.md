# 扫地机器人增强评估指标系统

## 🎯 新增指标说明

根据图片中的评估指标体系，系统现在监控以下完整的9个核心指标：

### 📊 核心性能指标

| 指标编号 | 指标名称 | 计算方式 | 取值范围 | 说明 |
|---------|---------|---------|----------|------|
| **CR** | 覆盖率 | 已清扫面积 / 总自由区域面积 | 0-1 | 越高越好 |
| **ME** | 运动效率 | 总移动距离 / 覆盖面积 | >0 | 越低越好 |
| **SR** | 清洁冗余度 | 重复清扫面积 / 总清扫面积 | 0-1 | 越低越好 |
| **Collision** | 碰撞次数 | 卡住检测统计 | ≥0 | 越少越好 |
| **CT** | 计算时间 | 平均规划计算耗时 | ≥0 | 越短越好 |
| **FT** | 任务总耗时 | 从开始到完成总时间 | ≥0 | 仿真时间 |
| **Vel_avg** | 平均速度 | 基于里程计数据 | ≥0 | m/s |
| **Acc_avg** | 平均加速度 | 速度变化率均值 | ≥0 | m/s² |
| **Jerk_avg** | 平均加加速度 | 加速度变化率均值 | ≥0 | m/s³ |

### 📈 额外统计指标

- **规划路径点总数**: 路径规划算法生成的目标点总数
- **实际清扫点数**: 机器人实际访问的路径点数
- **重复清扫面积**: 被多次清扫的区域面积
- **覆盖效率**: 单位时间覆盖面积 (m²/s)

## 🔧 系统增强功能

### 1. 实时运动学监控
- **速度计算**: 基于里程计连续位置计算瞬时速度
- **加速度计算**: 基于速度变化计算加速度
- **加加速度计算**: 基于加速度变化计算平滑度指标

### 2. 智能碰撞检测
- **卡住检测**: 当机器人在3秒内移动距离小于5cm时判定为碰撞
- **碰撞计数**: 累计记录碰撞次数
- **安全评级**: 基于碰撞次数进行安全性评估

### 3. 覆盖质量分析
- **重复度监控**: 实时计算重复清扫区域
- **效率评估**: 运动距离与清扫效果的比值
- **覆盖率增长**: 动态监控覆盖率变化趋势

### 4. 计算性能监控
- **规划时间**: 记录每次路径规划的计算耗时
- **系统响应**: 平均计算时间统计
- **性能基准**: 计算效率评估

## 📋 输出报告格式

### 实时显示 (终端输出)
```
=== 扫地机器人性能指标统计 ===
运行时间: 120.5 秒 (2.0 分钟)
规划路径点总数: 25
历史清扫点数: 156

--- 核心指标 ---
CR (覆盖率): 0.752 (75.20%)
ME (运动效率): 3.245 m/m²
SR (清洁冗余度): 0.089
Collision (碰撞次数): 0
CT (平均计算时间): 0.045 s
FT (任务总耗时): 120.5 s

--- 运动学指标 ---
Vel_avg (平均速度): 0.234 m/s
Acc_avg (平均加速度): 0.156 m/s²
Jerk_avg (平均加加速度): 0.023 m/s³
```

### 最终报告文件
- **文本报告**: `/tmp/sweeping_robot_report_*.txt`
- **CSV数据**: `/tmp/sweeping_robot_metrics_*.csv`

### CSV格式示例
```csv
指标,数值,单位,说明
CR,0.752,,覆盖率
ME,3.245,m/m²,运动效率
SR,0.089,,清洁冗余度
Collision,0,,碰撞次数
CT,0.045,s,平均计算时间
FT,120.5,s,任务总耗时
Vel_avg,0.234,m/s,平均速度
Acc_avg,0.156,m/s²,平均加速度
Jerk_avg,0.023,m/s³,平均加加速度
Planned_Points,25,,规划路径点总数
```

## 🎯 性能评级标准

### 运动效率 (ME)
- **优秀**: < 2.0 m/m²
- **良好**: 2.0 - 4.0 m/m²  
- **待优化**: > 4.0 m/m²

### 覆盖率 (CR)
- **优秀**: > 80%
- **良好**: 60% - 80%
- **待优化**: < 60%

### 冗余度 (SR)
- **优秀**: < 10%
- **良好**: 10% - 20%
- **待优化**: > 20%

### 碰撞安全 (Collision)
- **优秀**: 0 次
- **良好**: < 3 次
- **待优化**: ≥ 3 次

## 🚀 使用方法

1. **启动系统**:
   ```bash
   roslaunch auto_nav sequential_clean.launch
   ```

2. **实时监控覆盖率**:
   ```bash
   rostopic echo /coverage_percentage
   ```

3. **查看详细指标**: 观察终端输出的统计信息

4. **分析结果**: 任务完成后查看生成的报告文件

## 📝 注意事项

- 系统会自动检测任务完成并保存最终报告
- 所有指标都会实时更新并显示
- CSV格式便于后续数据分析和比较
- 支持多次运行的性能对比分析
